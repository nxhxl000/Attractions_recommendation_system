# Attractions Recommendation System

FastAPI-–±—ç–∫–µ–Ω–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π (PostgreSQL/Neon) –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ Vite + React (TypeScript).

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Attractions_recommendation_system/
‚îú‚îÄ environment.yml          # –ö–æ–Ω—Ñ–∏–≥ conda-–æ–∫—Ä—É–∂–µ–Ω–∏—è (Python + –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
‚îú‚îÄ .env.example             # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (DATABASE_URL)
‚îú‚îÄ backend/
‚îÇ  ‚îú‚îÄ app.py                # FastAPI + SQLAlchemy: –±–∞–∑–æ–≤—ã–µ CRUD (auto-id)
‚îÇ  ‚îî‚îÄ db_init.py            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î: —Ç–∞–±–ª–∏—Ü–∞, –∞–≤—Ç–æ-ID, —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îî‚îÄ frontend/                # Vite + React (TypeScript)
   ‚îú‚îÄ index.html
   ‚îú‚îÄ vite.config.ts        # dev-–ø—Ä–æ–∫—Å–∏ /api -> http://localhost:8000
   ‚îî‚îÄ src/
      ‚îú‚îÄ main.tsx
      ‚îú‚îÄ App.tsx            # –ö–Ω–æ–ø–∫–∞ ¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫¬ª -> GET /attractions
      ‚îî‚îÄ index.css          # –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
```

---

## ‚öôÔ∏è –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (conda)

### 1) –°–æ–∑–¥–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
conda env create -f environment.yml
```

### 2) –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
conda activate attractions_reco
```

### 3) –û–±–Ω–æ–≤–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ `environment.yml` –∏–∑–º–µ–Ω–∏–ª—Å—è)
```bash
conda env update -f environment.yml --prune
```

---

## üåê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î (Neon PostgreSQL)

1. –í –∫–æ–Ω—Å–æ–ª–∏ Neon –Ω–∞–∂–º–∏—Ç–µ **Connect** –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∞  
   `postgresql://USER:PASSWORD@HOST/DBNAME?sslmode=require`.
2. –°–æ–∑–¥–∞–π—Ç–µ `.env` –∏–∑ `.env.example` –∏ –¥–æ–±–∞–≤—å—Ç–µ `+psycopg2`:
   ```
   DATABASE_URL=postgresql+psycopg2://USER:PASSWORD@HOST/DBNAME?sslmode=require
   ```

---

## üß± –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–∫—Ä–∏–ø—Ç `backend/db_init.py`:
- —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—É `public.attractions` (–µ—Å–ª–∏ –µ—ë –Ω–µ—Ç);
- –≤–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏—é `id` (`GENERATED BY DEFAULT AS IDENTITY`);
- —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å `id`;
- –¥–æ–±–∞–≤–ª—è–µ—Ç 2 –∑–∞–ø–∏—Å–∏: ¬´–°—Ç–∞—Ä—ã–π –∑–∞–º–æ–∫¬ª, ¬´–ì–æ—Ä–æ–¥—Å–∫–æ–π –ø–∞—Ä–∫¬ª.

```bash
python backend/db_load_attractions.py
```

```bash
python backend/db_load_ratings.py
```

```bash
python backend/db_update_create_trigger.py
```

–í—ã–≤–æ–¥ ‚Äî –Ω–∞ —Ä—É—Å—Å–∫–æ–º. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑–æ–ø–∞—Å–µ–Ω.

---

## üöÄ –ó–∞–ø—É—Å–∫ –±—ç–∫–µ–Ω–¥–∞

```bash
uvicorn backend.app:app --reload --port 8000
```

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8000/docs

**–ë–∞–∑–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**
| –ú–µ—Ç–æ–¥  | –ú–∞—Ä—à—Ä—É—Ç                 | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
|--------|-------------------------|--------------------------------------------|
| GET    | `/attractions`          | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö                                 |
| GET    | `/attractions/{id}`     | –ó–∞–ø–∏—Å—å –ø–æ ID                                |
| POST   | `/attractions`          | –°–æ–∑–¥–∞—Ç—å (—Ç–µ–ª–æ: `{ "name": "..." }`)         |
| DELETE | `/attractions/{id}`     | –£–¥–∞–ª–∏—Ç—å –ø–æ ID                               |
| GET    | `/health`               | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞                   |

---

## üñ•Ô∏è –§—Ä–æ–Ω—Ç–µ–Ω–¥ (Vite + React + TypeScript)

### Dev-–ø—Ä–æ–∫—Å–∏ –∫ FastAPI
–í `frontend/vite.config.ts` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–æ–∫—Å–∏:
```ts
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8000',
      changeOrigin: true,
      rewrite: (p) => p.replace(/^\/api/, ''),
    },
  },
}
```
–í –∫–æ–¥–µ —Ñ—Ä–æ–Ω—Ç–∞ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ `"/api/attractions"` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ FastAPI.

### –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (dev)
–í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
cd frontend
npm install        # –æ–¥–∏–Ω —Ä–∞–∑
npm run dev        # –æ—Ç–∫—Ä–æ–µ—Ç—Å—è http://localhost:5173
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç –∏ –±—ç–∫–µ–Ω–¥ –±—É–¥—É—Ç –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö –±–µ–∑ –ø—Ä–æ–∫—Å–∏, –∑–∞–¥–∞–π—Ç–µ –±–∞–∑–æ–≤—ã–π URL:
```
# frontend/.env –∏–ª–∏ .env.production
VITE_API_URL=https://your-backend-host
```
–í `src/App.tsx` —ç—Ç–æ —É–∂–µ —É—á—Ç–µ–Ω–æ: –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `VITE_API_URL` –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ –Ω–µ–≥–æ, –∏–Ω–∞—á–µ ‚Äî —á–µ—Ä–µ–∑ dev-–ø—Ä–æ–∫—Å–∏ `/api`.

---

## ‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ø–æ—Å–ª–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)

```bash
# Backend
conda activate attractions_reco
python backend/db_load_attractions.py
python backend/db_load_ratings.py
python backend/db_update_create_trigger.py
uvicorn backend.app:app --reload --port 8000

# Frontend
cd frontend
npm install
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ:  
- API: http://localhost:8000/docs  
- —Ñ—Ä–æ–Ω—Ç: http://localhost:5173 ‚Äî –Ω–∞–∂–º–∏—Ç–µ ¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫¬ª, –ø–æ—è–≤—è—Ç—Å—è –∑–∞–ø–∏—Å–∏ –∏–∑ –ë–î.

---

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- `id` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ PostgreSQL.  
- –§–∞–π–ª `.env` **–Ω–µ –∫–æ–º–º–∏—Ç–∏–º** (—Å–µ–∫—Ä–µ—Ç—ã), –∏—Å–ø–æ–ª—å–∑—É–µ–º `.env.example`.  
- –î–ª—è Neon –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ `sslmode=require`.  
